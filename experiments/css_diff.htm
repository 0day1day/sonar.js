<!DOCTYPE html>
<html class="sonar_probe" lang="en-US">
<meta class="sonar_probe" charset="UTF-8">
  <!-- This entire page is just a probe to diff CSS styles that get applied when you include an external stylesheet -->
  <head class="sonar_probe">
  </head>
  <body class="sonar_probe">
    <a class="sonar_probe" href="https://www.example.com/">Example</a>
    <abbr class="sonar_probe" title="Example">Example</abbr>
    <acronym class="sonar_probe" title="Example">Ex</acronym>
    <address class="sonar_probe">
      1234 23rd St.
      Compton
    </address>
    <article class="sonar_probe">Example</article>
    <aside class="sonar_probe">Example</aside>
    <audio class="sonar_probe"></audio>
    <b class="sonar_probe">Example</b>
    <base class="sonar_probe" href="https://www.example.com/">
    <bdi class="sonar_probe">Example</bdi>
    <bdo class="sonar_probe">Example</bdo>
    <big class="sonar_probe">Example</big>
    <blockquote class="sonar_probe">Example</blockquote>
    <br class="sonar_probe" />
    <button class="sonar_probe" type="button">Example</button>
    <canvas class="sonar_probe"></canvas>
    <caption class="sonar_probe">Example</caption>
    <center class="sonar_probe">Example</center>
    <cite class="sonar_probe">Example</cite>
    <code class="sonar_probe">Example</code>
    <table class="sonar_probe">
    <colgroup class="sonar_probe">
      <col class="sonar_probe">
    </colgroup>
    <tr class="sonar_probe">
      <th class="sonar_probe">Example</th>
    </tr>
    <tr>
      <td class="sonar_probe">Example</td>
    </tr>
    <tfoot class="sonar_probe"></tfoot>
    </table>
    <datalist class="sonar_probe">
      <option value="Example">
    </datalist>
    <dl class="sonar_probe">
      <dt class="sonar_probe">Example</dt>
      <dd class="sonar_probe">Example</dd>
    </dl>
    <del class="sonar_probe">Example</del>
    <details class="sonar_probe">Example</details>
    <dfn class="sonar_probe">Example</dfn>
    <dialog class="sonar_probe">Example</dialog>
    <dir class="sonar_probe">Example</dir>
    <div class="sonar_probe">Example</div>
    <em class="sonar_probe">Example</em>
    <embed class="sonar_probe"></embed>
    <fieldset class="sonar_probe">Example</fieldset>
    <figure class="sonar_probe">
      <figcaption class="sonar_probe">Example</figcaption>
    </figure>
    <font class="sonar_probe">Example</font>
    <form class="sonar_probe"></form>
    <frameset class="sonar_probe">
      <frame class="sonar_probe" src="data:text/html,Example"></frame>
    </frameset>
    <h1 class="sonar_probe">Example</h1>
    <h2 class="sonar_probe">Example</h2>
    <h3 class="sonar_probe">Example</h3>
    <h4 class="sonar_probe">Example</h4>
    <h5 class="sonar_probe">Example</h5>
    <h6 class="sonar_probe">Example</h6>
    <header class="sonar_probe">Example</header>
    <hr class="sonar_probe">
    <i class="sonar_probe">Example</i>
    <iframe class="sonar_probe" src="data:text/html,Example"></iframe>
    <img class="sonar_probe" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX4/P+Jpl6OAAAAEklEQVR4XgXAgQgAAAAAoP2pjwACAAF0O1JHAAAAAElFTkSuQmCC">
    <input class="sonar_probe"></input>
    <ins class="sonar_probe">Example</ins>
    <kbd class="sonar_probe">Example</kbd>
    <keygen class="sonar_probe">
    <label class="sonar_probe">Example</label>
    <legend class="sonar_probe">Example</legend>
    <li class="sonar_probe">Example</li>
    <link class="sonar_probe" rel="stylesheet" type="text/css" href="data:text/css,">
    <main class="sonar_probe">Example</main>
    <mark class="sonar_probe">Example</mark>
    <menu class="sonar_probe" type="context">
      <menuitem class="sonar_probe">
        Example
      </menuitem>
    </menu>
    <meter class="sonar_probe" value="2" min="0" max="10">Example</meter>
    <nav class="sonar_probe"></nav>
    <noframes class="sonar_probe">Example</noframes>
    <noscript class="sonar_probe">Example</noscript>
    <object class="sonar_probe"><param class="sonar_probe"></param></object>
    <ol class="sonar_probe">Example</ol>
    <optgroup class="sonar_probe">Example</optgroup>
    <output class="sonar_probe">Example</output>
    <p class="sonar_probe">Example</p>
    <pre class="sonar_probe"></pre>
    <progress class="sonar_probe" value="22" max="100"></progress>
    <q class="sonar_probe">Example</q>
    <ruby class="sonar_probe">
      漢 <rt class="sonar_probe"><rp class="sonar_probe">(</rp>ㄏㄢˋ<rp>)</rp></rt>
    </ruby>
    <s class="sonar_probe">Example</s>
    <samp class="sonar_probe">Example</samp>
    <script class="sonar_probe" src="data:text/javascript,[]"></script>
    <section class="sonar_probe">Example</section>
    <select class="sonar_probe"></select>
    <small class="sonar_probe">Example</small>
    <source class="sonar_probe"></source>
    <span class="sonar_probe">Example</span>
    <strike class="sonar_probe">Example</strike>
    <strong class="sonar_probe">Example</strong>
    <style class="sonar_probe"></style>
    <sub class="sonar_probe">Example</sub>
    <summary class="sonar_probe">Example</summary>
    <sup class="sonar_probe">Example</sup>
    <textarea class="sonar_probe"></textarea>
    <time class="sonar_probe">13:37</time>
    <title class="sonar_probe">Example</title>
    <track class="sonar_probe"></track>
    <tt class="sonar_probe">Example</tt>
    <u class="sonar_probe">Example</u>
    <ul class="sonar_probe">Example</ul>
    <var class="sonar_probe">Example</var>
    <wbr class="sonar_probe">Example</wbr>
    <div id="main" class="sonar_probe"></div>
  </body>
  <footer class="sonar_probe">Example</footer>
  <script>
    var before_stylesheet = get_styles( "sonar_probe" );
    var remote_stylesheet = document.createElement('link');
    remote_stylesheet.type = 'text/css';
    remote_stylesheet.rel = 'stylesheet';
    remote_stylesheet.href = 'https://www.yahoo.com/sy/zz/combo?nn/lib/metro/g/yui/widget-base-css_3.8.1.css&nn/lib/metro/g/yui/widget-stack-css_3.8.1.css&nn/lib/metro/g/yui/overlay-css_3.8.1.css&nn/lib/metro/g/ui/base_0.0.11.css&nn/lib/metro/g/ui/helpers_0.0.9.css&nn/lib/metro/g/ui/typography_0.0.4.css&nn/lib/metro/g/theme/default/common_0.0.40.css&nn/lib/metro/g/theme/default/desktop_0.0.142.css&nn/lib/metro/g/theme/hr_blue_0.0.17.css&nn/lib/metro/g/uiplugins/modal_service_0.0.4.css&nn/lib/metro/g/uiplugins/iframeshim_service_0.0.13.css&nn/lib/metro/g/uiplugins/menu_service_0.1.15.css&nn/lib/metro/g/uiplugins/tablite_service_desktop_0.0.18.css&nn/lib/metro/g/uiplugins/tablist_service_0.1.16.css&nn/lib/metro/g/uiplugins/tablist_default_0.1.19.css&nn/lib/metro/g/uiplugins/tablist_service_vertical_0.0.3.css&nn/lib/metro/g/uicontrib/lw_style_css_0.0.2.css&nn/lib/metro/g/uiplugins/tooltip_service_1.0.15.css&nn/lib/metro/g/uiplugins/carousel_service_0.1.22.css';
    remote_stylesheet.onload = function() {
      after_stylesheet = get_styles( "sonar_probe" );
      console.log( diff_styles( before_stylesheet, after_stylesheet ) );
    };
    document.getElementsByTagName("head")[0].appendChild( remote_stylesheet );

    function diff_styles( first_styleset, second_styleset ) {
      var diffs = {};
      for( tag_element in second_styleset ) {
        for( style in second_styleset[ tag_element ] ) {
          if( style in first_styleset[ tag_element ] ) {
            if( second_styleset[ tag_element ][ style ] !== first_styleset[ tag_element ][ style ] ) {
              //console.log( 'Style "' + style + '" in ' + tag_element + ' changed from "' + first_styleset[ tag_element ][ style ] + '" to "' + second_styleset[ tag_element ][ style ] + '"' );
              if( diffs[ tag_element ] === undefined ) {
                diffs[ tag_element ] = {};
              }
              diffs[ tag_element ][ style ] = second_styleset[ tag_element ][ style ];
            }
          }
        }
      }
      return diffs;
    }

    function get_styles( class_name ) {
      style_property_blacklist = [ 'height', 'width' ];
      probes = document.getElementsByClassName( class_name );
      probe_styles = [];
      return_probe_data = {};
      for( var i = 0; i < probes.length; i++ ) {
        var probe_element_results = {};
        var element_styles = window.getComputedStyle( probes[i] );
        for( style in element_styles ) {
          if( isNaN( style ) && style != 'length' && style != 'cssText' && style != 'parentRule' && style_property_blacklist.indexOf( style ) == -1) {
            probe_element_results[ style ] = element_styles.getPropertyValue( style );
          }
        }
        var key_name = '';
        if( probes[i].id == '' ) {
          key_name = probes[i].tagName;
        } else {
          key_name = probes[i].tagName + '_' + probes[i].id;
        }
        return_probe_data[ key_name ] = probe_element_results;
      }
      return return_probe_data;
    }
  </script>
</html>
